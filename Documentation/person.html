<html>
<head>
	<title>C++ Phone Documentation</title>
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
	<script type="text/javascript" href="bootstrap/js/bootstrap.js"></script>

	<style type="text/css">
		.navbar{
			    background-color: #080808;

		}
		#head{
			text-align: -webkit-center;
		}
		#instBody{
			    margin-left: 10%;
		}
		#boot{
			    float: right;
    			margin-top: -2%;
		}
        #dataMember{
                margin-left: 10%;
        }
        #dataMember em{
            color:#0C6317;
        }

	</style>

</head>
<body>

	<!-- Navigation bar -->
<nav class="navbar navbar-default navbar-static-top">
  		<div class="container">
  			<h4> <a href="index.html">C++ Phone Documentation</a></h4>
      	</div>
</nav>

	<!-- main body -->
	<div class="container">
		<div class="col-md-3">
		<!-- Left column for index of content -->


            <div class="list-group"><br><br>

  <button type="button" class="list-group-item" disabled="disabled"> <a href="person.html">Person.h</a></button>
  <button type="button" class="list-group-item"><a href="phone.html">Phone.h</a></button>
  <button type="button" class="list-group-item"><a href="phonecall.html">PhoneCall.h</a></button>
  <button type="button" class="list-group-item"><a href="phonebook.html">PhoneBook.h</a></button>
  <button type="button" class="list-group-item"><a href="registerPerson.html">RegisterPerson.h</a></button>
  <button type="button" class="list-group-item"><a href="sms.html">SMS.h</a></button>
  <button type="button" class="list-group-item"><a href="methods.html">Methods.h</a></button>
  <button type="button" class="list-group-item"><a href="options.html">Options.h</a></button>
  <button type="button" class="list-group-item"><a href="sfml.html">SFML.h</a></button>
  <button type="button" class="list-group-item"><a href="calculator.html">Calculator.h</a></button>
            </div><br>


         <div class="list-group">

        <button type="button" class="list-group-item"><a href="headerFunctions.html#iostream">< iostream ></a></button>
          <button type="button" class="list-group-item"><a href="headerFunctions.html#ctime">< ctime ></a></button>
            <button type="button" class="list-group-item"><a href="headerFunctions.html#string">< string ></a></button>
              <button type="button" class="list-group-item"><a href="headerFunctions.html#sstream">< sstream ></a></button>
              <button type="button" class="list-group-item"><a href="headerFunctions.html#cstdlib">< cstdlib ></a></button>
               <button type="button" class="list-group-item"><a href="headerFunctions.html#cstdio">< cstdio ></a></button>
                <button type="button" class="list-group-item"><a href="headerFunctions.html#algorithm">< algorithm ></a></button>
              
              <button type="button" class="list-group-item"><a href="headerFunctions.html#fstream">< fstream ></a></button>
              <button type="button" class="list-group-item"><a href="headerFunctions.html#limits">< limits ></a></button>
              <button type="button" class="list-group-item"><a href="headerFunctions.html#cmath">< cmath ></a></button>

               <button type="button" class="list-group-item"><a href="headerFunctions.html#vector">< vector ></a></button>
              <button type="button" class="list-group-item"><a href="headerFunctions.html#map">< map ></a></button>


        </div><br>

      <div class="list-group">

        <button type="button" class="list-group-item"><a href="howtoSFML.html">How to set up SFML </a></button>
        <button type="button" class="list-group-item"><a href="howtorun.html">How to run the software </a></button>
                <button type="button" class="list-group-item"><a href="howitworks.html">How it works </a></button>

        </div><br>


		</div>
<div class="col-md-9">
				<div class="col-md-9">
			<h1><i>&nbsp&nbspPerson.h </i></h1>
            <p>This header file deifnes the class <strong>Person </strong></p>
            <hr><br>
            <h3>Brief Description: </h3>

             <br><p>- Creates a new Person</p>
            <p>- Registers a Phone with a Phone Number to a Person
</p>
<p>- Methods to find: 
    <li>Total credit over all phones</li>
    <li>Average length of all calls made
</li>
    <li>Total cost of calls made last month from each phone
</li>
    <li>Max call number
</li>
</p>
<p>- Registers a Phone with a Phone Number to a Person
</p>
    
    <br>
            <h3>Data Members <small>[private] </small></h3>

            <div id="dataMember">
            <li><em>string</em>  personName</li>
            <li><em>int</em> personId</li>
            </div><br>


            <h3>Member Functions <small>[public] </small></h3>
                <div id="dataMember">
            <li>Person() <small>&nbsp [default constructor]</small></li>
            <li>Person(<em>string</em> name)<small> &nbsp [parameterize constructor]</small></li>

             <li><em>string </em>  getPersonName() </li>
            <li><em>int</em>  getPersonId()</li>
             <li><em>double</em> getTotalCredit()</li>
            <li><em>double</em>  getAvgCallLength()</li>
            <li><em>double</em>  getCostLastMonth()</li>
            <li><em>string</em>  getMaxCallNumber()</li>
            <li><em>int</em>  getPhoneBoxSize()</li>

            </div><br>

            <h3>Static Members <small>[static] </small></h3>
                <div id="dataMember">
                    <li><em>int</em>  personCount</li>
                    <li><em>int</em>  getPersonCount()</li>
                </div><br>

                 <h3>Containers </h3>
                <div id="dataMember">
                    <li><strong>vector</strong><<em>string</em>>  allCallNumber</li>
                    <li><strong>vector</strong><<em>Phone</em>>  phoneBox</li>                </div><br>

                <h3>Code </h3>

			<div id="code">
					<!-- CODE -->
					<pre>

#include "Phone.h"
using namespace std;

//class to create new Persons objects
class Person{
    private:
        string personName;
        int personId;

    public:
        vector<string>allCallNumber;
        vector<Phone>phoneBox;
        //Person(){ };
        Person();
        Person(string name);
                                 
        string getPersonName();
        int getPersonId();
        double getTotalCredit();
        double getAvgCallLength();
        double getCostLastMonth(int index);
        string getMaxCallNumber();
        int getPhoneBoxSize();

    //static members
        static int personCount;
        static int getPersonCount();
};

Person::Person(){
    this->personName="";
    this->personId=0;
}

Person::Person(string name){
        this->personName=name;
        personCount++;
        this->personId=personCount;
}

int Person::getPhoneBoxSize(){
        return this->phoneBox.size();
}

//getters
string Person::getPersonName(){
        return this->personName;
}
int Person::getPersonId(){
        return this->personId;
}
double Person::getTotalCredit(){
        double sumCredit=0;
        for(int i=0;i<this->phoneBox.size();i++){
            double credit=phoneBox[i].getPhoneCredit();
            sumCredit=sumCredit+credit;
        }
        return sumCredit;
}

double Person::getAvgCallLength(){
    double totalCallLength=0,callCount=0;
     for(int i=0;i<this->phoneBox.size();i++){
        Phone myPhn=this->phoneBox[i];
        for(int j=0;j<myPhn.getCallHistorySize();j++){
            PhoneCall myCall=myPhn.getCallHistory(j);
            totalCallLength=totalCallLength+myCall.getCallDuration();
            callCount++;
        }
     }
     return totalCallLength/callCount;
}

double Person::getCostLastMonth(int index){
        Phone phn=this->phoneBox[index];

        time_t now=time(0);
        tm *ptm=localtime(&now);
        int currentMonth=ptm->tm_mon+1;
        int previousMonth=currentMonth-1;
        if(previousMonth==0){
            previousMonth=12;
        }

        double totalCost=0;
        for(int i=0;i<phn.getCallHistorySize();i++){
            PhoneCall call=phn.getCallHistory(i);
            string date=call.getStartDate();

            int digit;
            size_t pos=date.find_first_of("/",0);
            date=date.substr(0,pos);
            stringstream ss;
            ss<<date;
            ss>>digit;

            if(digit==previousMonth){
                totalCost=totalCost+call.getCallCost();
            }
        }
        return totalCost;
}

string Person::getMaxCallNumber(){
        int sz=this->getPhoneBoxSize();
    //store all call numbers from all Phone in phoneBox into the vector allCallNumber
        for(int i=0;i<sz;i++){
            Phone phn=this->phoneBox[i];
            for(int j=0;j<phn.getCallHistorySize();j++){
                PhoneCall call=phn.getCallHistory(j);
                string num=call.getCallNumber();
                this->allCallNumber.push_back(num);
            }
        }
    //calculate the maximum callNumber stored in vector allCallNumber
        int mxCount=0,inCount;
        string mxCall;
        for(int i=0;i<allCallNumber.size();i++){
            string check=allCallNumber[i];
            inCount=0;
            for(int j=0;j<allCallNumber.size();j++){
                if(i==j){
                    continue;
                }
                else if(check==allCallNumber[j]){
                    inCount++;
                }
            }
            if(inCount>mxCount){
                mxCount=inCount;
                mxCall=check;
            }
        }
        if(mxCall!=""){
            return mxCall;
        }
        else{
            return "NULL";
        }
}

//static members
int Person::personCount=0;
int Person::getPersonCount(){
        return personCount;
}

</pre>


			</div>
				</div>
		</div>
	</div>

				</div>



		</div>







	</div>






</body>
</html>